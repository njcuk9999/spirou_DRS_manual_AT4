\chapter{Constants and Keywords}

% shortcuts to oftenly used variables
\newcommand{\calloc}{cal\_loc\_RAW\_spirou.py}
\newcommand{\caldark}{cal\_DARK\_spirou.py}
\newcommand{\calslit}{cal\_SLIT\_spirou.py}
\newcommand{\calff}{cal\_ff\_RAW\_spirou.py}
\newcommand{\calext}{cal\_extract\_RAW\_spirou\definevariable{fiber}.py}
\newcommand{\calextall}{cal\_extract\_RAW\_spirouALL.py}
\newcommand{\caldrift}{cal\_DRIFT\_RAW\_spirou.py}

\newcommand{\spirouRV}{spirouRV.py}
\newcommand{\hadmricdp}{hadmrICDP\_SPIROU.py}
\newcommand{\kwdrs}{KW\_DRS.py}
\newcommand{\rootdrsloc}{\definevariable{kw\_root\_drs\_loc}}
\newcommand{\rootdrsflat}{\definevariable{kw\_root\_drs\_flat}}
\newcommand{\locofiber}{*\_LOCO\_\definevariable{fiber}*}
\newcommand{\fwhmfiber}{*\_fwhm-order\_\definevariable{fiber}*}


% ------------------------------------------------------------------------
\section{The configuration files}
\label{section:the_config_files}
% ------------------------------------------------------------------------

The configurations files are found in the \definevariable{INSTALL\_ROOT}/DRS\_\definevariable{INSTRUMENT\_NAME}/config folder i.e. for our example in Section \ref{section:edit_env_setup} this would be `/data/spirou/drs/INTROOT/DRS\_SPIROU/config/'

The file structure should look as follows:
\customdirtree{%
.1 \{DIR\}.
.2 \{INSTALL\_ROOT\}.
.3 config.
.4 compute\_CaII\_HARPS.py.
.4 correct\_geom\_coralie.py.
.4 correct\_geom\_elodie.py.
.4 correct\_geom\_harpn.py.
.4 correct\_meanpondref\_CORALIE.py.
.4 correct\_meanpondref\_EGGS.py.
.4 correct\_meanpondref\_ELODIE.py.
.4 correct\_meanpondref\_HARPS.py.
.4 db\_filter\_CORALIE.py.
.4 db\_filter\_EGGS.py.
.4 db\_filter\_HARPN.py.
.4 db\_filter\_HARPS.py.
.4 dic\_recipes\_CORALIE.py.
.4 dic\_recipes\_EGGS.py.
.4 dic\_recipes\_ELODIE-S.py.
.4 dic\_recipes\_HARPN.py.
.4 dic\_recipes\_HARPS.py.
.4 hadmrICDP\_CORALIE07.py.
.4 hadmrICDP\_CORALIE14.py.
.4 hadmrICDP\_CORALIE98\_dec04.py.
.4 hadmrICDP\_CORALIE98\_jun99.py.
.4 hadmrICDP\_CORALIE98\_oct98.py.
.4 hadmrICDP\_CORALIE98\_sep02.py.
.4 hadmrICDP\_EGGS.py.
.4 hadmrICDP\_ELODIE.py.
.4 hadmrICDP\_ELODIE-S.py.
.4 hadmrICDP\_HARPN\_may12.py.
.4 hadmrICDP\_HARPN.py.
.4 hadmrICDP\_HARPN\_sep12.py.
.4 hadmrICDP\_HARPS.py.
.4 hadmrICDP\_SOPHIE.py.
.4 hadmrICDP\_SPIROU\_H2RG.py.
.4 hadmrICDP\_SPIROU\_H4RG.py.
.4 hadmrICDP\_SPIROU.py.
.4 kw\_allocate\_CORALIE.py.
.4 kw\_allocate\_ELODIE.py.
.4 kw\_allocate\_HARPN.py.
.4 kw\_allocate\_HARPS.py.
.4 kw\_allocate\_SOPHIE.py.
.4 kw\_allocate\_SPIROU.py.
.4 KW\_CORALIE14.py.
.4 KW\_CORALIE.py.
.4 kw\_display\_CORALIE.py.
.4 kw\_display\_ELODIE.py.
.4 kw\_display\_HARPN.py.
.4 kw\_display\_HARPS.py.
.4 kw\_display\_SOPHIE.py.
.4 kw\_display\_SPIROU.py.
.4 KW\_DRS.py.
.4 KW\_ELODIE.py.
.4 KW\_HARPN.py.
.4 KW\_HARPS.py.
.4 kw\_lamp\_CORALIE.py.
.4 kw\_list\_CORALIE.py.
.4 kw\_list\_ELODIE.py.
.4 kw\_list\_HARPN.py.
.4 kw\_list\_HARPS.py.
.4 kw\_list\_SOPHIE.py.
.4 kw\_list\_SPIROU.py.
.4 kw\_pol.py.
.4 KW\_SOPHIE.py.
.4 KW\_SPIROU.py.
.4 special\_config\_CORALIE98.py.
.4 special\_config\_ELODIE-S.py.
.4 special\_config\_HARPN.py.
.4 special\_wave\_CORALIE\_initial.py.
}

\noindent These files contain most the variables that are used throughout the DRS (unfortunately hard-coded into the program files). The descriptions of used constants and keywords, the recipe(s) that use them and their location (or locations) are defined below.



% ------------------------------------------------------------------------
\section{Environmental variables}
\label{section:the_env_variables}
% ------------------------------------------------------------------------

Some constants are set via the environmental variables (Section \ref{section:edit_env_setup}), they are set either via sourcing a shell scripted (Section \ref{section:edit_env_setup}) or manually adding them (i.e. via the `.bashrc' file, see Section \ref{section:using_bashrc}).

\begin{itemize}
\item \definevariable{INSTRUMENT\_NAME} = Set the instrument name
\item \definevariable{DATA\_ROOT}= Directory in which all SPIROU files go
\item \definevariable{INSTALL\_ROOT} = Define installation folder name
\item \definevariable{DATA\_ROOT} = Define data folder name
\item \definevariable{DATA\_ROOT\_RAW} = Define raw path
\item \definevariable{DATA\_ROOT\_REDUCED} Define reduced path
\item \definevariable{DATA\_ROOT\_CALIB} = Define calibDB path
\item \definevariable{DATA\_ROOT\_MSG} = Define msg path
\item \definevariable{DATA\_ROOT\_TMP} = Define tmp path
\item \definevariable{PYTHON\_VERSION} = Define python version
\item \definevariable{PYTHON\_DIR} = Define python directory (i.e. result of command "which python")
\item \definevariable{GSL\_DIR} = Define GSL path (default paths if installed may be /usr/local/include/gsl or /opt/gsl)
\end{itemize}

In addition some other environmental variables are set (or need to be set).
\begin{itemize}
	\item \definevariable{DRS\_VERSION} = The current version of the DRS
	\item \definevariable{DRS\_PLOT} = If `1' then plots will be shown, if undefined then plot will not be shown, if `trigger' will send commands to a file for later plotting.
	\item \definevariable{DRS\_DEBUG} = The current debug level, default = undefined or = 0, depending on the integer value will print/plot various parts of debugging code.
	\item \definevariable{DRS\_CONFIG} = Define the config path (defaults to \definevariable{DATA\_ROOT}/config)
	\item \definevariable{DRS\_MAN} = Define the manual path (defaults to \definevariable{DATA\_ROOT}/man)
	\item \definevariable{DRS\_DATA\_WORKING} = Defines the current working directory (defaults to \definevariable{DATA\_ROOT\_TMP}) ?
\end{itemize} 

% ------------------------------------------------------------------------
\section{Constants}
\label{section:the_constants}

%----------------------------------------------------------------


% For consistency use:
% \ParamList{1}{2}{3}{4}{5}
% Where:
%        1 = Name of variable used in code (as written in code)
%        2 = Default value of the variable
%        3 = Description of the keyword
%        4 = Where keyword is used (code and or file)
%        5 = Where keyword is defined (code)

%  If default value is python code one can use the slightly modified command:

% \ParamListCode{1}{\lstinline[style=pythonstyle]{2}}{3}{4}{5}
% Where:
%        1 = Name of variable used in code (as written in code)
%        2 = Code using lstinline
%
%        i.e.     2 = \lstinline[style=pythonstyle]{Some python code here}
%
%        3 = Description of the keyword
%        4 = Where keyword is used (code and or file)
%        5 = Where keyword is defined (code)

% ------------------------------------------------------------------------

Below are the listed currently used constants in table format. The `Name' column refers to the name of the constant (and what to search for), the `Value' column is the default value, the `Description' column provides a brief description of what the variable controls, the `Used in' column shows which recipes use this variable and the `Location' column defines the file or files in which this variable is located (they may be hardcoded in recipe files thus the location may not be a config file), order of precedence is indicated but may be wrong (probably best to change call instances). These are split into catagories for ease of reading. \\

\noindent Note: This section is currently updated for `\caldark',`\calloc', `\calslit', `\calff', `\calext', `\calextall' only.

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{General constants}

%----------------------------------------------------------------

\ParamList{ic\_disptimeout}{0.5}{Interval between plots (for certain iteractive graphs)}{\calloc}{\hadmricdp}

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Image Variables}

%----------------------------------------------------------------


\ParamListCode{ic\_ccdx\_blue}{\lstinline[style=pythonstyle]{2048-arange(200,1500)}}{Resize blue window x array}{\caldark}{\caldark}
% future ic_ccdx_blue_low, ic_ccdx_blue_high


\ParamListCode{ic\_ccdy\_blue}{\lstinline[style=pythonstyle]{2048-arange(20,350)}}{Resize blue window y array}{\caldark}{\caldark}
% future ic_ccdy_blue_low, ic_ccdy_blue_high

\ParamListCode{ic\_ccdx\_red}{\lstinline[style=pythonstyle]{2048-arange(20,1750}}{Resize red window x array}{\caldark}{\caldark}
% future ic_ccdx_red_low, ic_ccdx_red_high

\ParamListCode{ic\_ccdy\_red}{\lstinline[style=pythonstyle]{2048-arange(1570,1910)}}{Resize red window y array}{\caldark}{\caldark}
% future ic_ccdy_red_low, ic_ccdy_red_high

\ParamListCode{ic\_ccdx}{\lstinline[style=pythonstyle]{arange(5,2040)}}{Resize array for x}{\caldark, \calloc, \calslit, \calff, \calext, \calextall}{\caldark, \calloc, \calslit, \calff, \calext, \calextall, \hadmricdp}
% future ic_ccdx_low, ic_ccdx_high

\ParamListCode{ic\_ccdy}{\lstinline[style=pythonstyle]{arange(5,1935)}}{Resize array for y}{\caldark, \calloc, \calslit, \calff, \calext, \calextall}{\caldark, \calloc, \calslit, \calff, \calext, \calextall, \hadmricdp}
% future ic_ccdy_low, ic_ccdy_high

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Fiber variables}

%----------------------------------------------------------------

% future = need "fiber_params"

Note: these variables depend on prefix of input file. First entry is for `flat\_dark' second is for `dark\_flat'

\ParamList{fiber}{AB, C}{Fiber Name}{\calloc}{\calloc}
% future = define _AB and _C for each

\ParamList{nbfiber}{2, 1}{Number of fibers}{\calloc}{\calloc}
% future = define _AB and _C for each

\ParamList{ic\_first\_ord\_jump}{2, 0}{Number of orders to skip at start of image}{\calloc}{\calloc, \hadmricdp}
% future = define _AB and _C for each

\ParamList{ic\_locnbmaxo}{72, 36}{Maximum number of order to use}{\calloc}{\calloc, \hadmricdp}
% future = define _AB and _C for each

\ParamList{qc\_loc\_nbo}{72, 36}{Quality control "normal" number of orders on fiber}{\calloc}{\calloc, \hadmricdp}
% future = define _AB and _C for each

% Future: fib_type_fpall

% Future: ic_ext_range1_fpall

% Future: ic_ext_range2_fpall

% Future: ic_ext_range_fpall

% Future: loc_file_fpall

% Future: order_file_fpall


% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Dark Variables}

%----------------------------------------------------------------

\ParamList{cutlimit}{100}{Define a bad pixel cut limit (in ADU/s)}{\caldark}{\caldark}
% Future = dark_cutlimit

\ParamList{qmin, qmin2, qmin3}{5}{The lower percentile (0 - 100) for dead pixels}{\caldark}{\caldark}
% Future dark_qmin
\ParamList{qmax, qmax2, qmax3}{95}{The upper percentile (0 - 100) for dead pixels}{\caldark}{\caldark}
% Future dark_qmax

% Future histo_bins
% Future histo_range_low
% Future histo_range_high

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Localisation parameters}

%----------------------------------------------------------------

\ParamList{size}{10}{Size of the order\_profile smoothed box (from pixel - size to pixel + size)}{\calloc}{\calloc}
% Future loc_box_size

\ParamList{ic\_offset}{40}{row number of image to start processing at}{\calloc}{\calloc}

\ParamList{ic\_ccdcolc}{1000}{Definition of the central column}{\calloc, \calslit}{\calloc, \hadmricdp}
% Future ic_cent_col

\ParamList{ic\_ext\_window}{12}{Definition of the extraction window size (half size)}{\calloc}{\calloc}

\ParamList{ic\_ccdgap}{0}{Definition of the gap index in the selected area}{\calloc}{\hadmricdp}
% Future ic_image_gap

\ParamList{ic\_locstepc}{20}{Define the column separation for fitting orders }{\calloc}{\calloc, \hadmricdp}

\ParamList{ic\_widthmin}{5}{Define minimum width of order to be accepted}{\calloc}{\calloc}

\ParamList{ic\_locnbpix}{45}{Half spacing between orders}{\calloc}{\calloc, \hadmricdp}

\ParamList{ic\_min\_amplitude}{100}{Minimum amplitude to accept (in e-)}{\calloc}{\hadmricdp}

\ParamList{ic\_locseuil}{0.2}{Normalised amplitude threshold to accept pixels for background calculation}{\calloc}{\calloc}

\ParamListCode{satseuil}{\lstinline[style=pythonstyle]{64536 * ccdgain * nbframes}}{Saturation threshold on order profile plot}{\calloc}{\calloc}
% Future ic_satseuil

\ParamList{ic\_locdfitc}{5}{Order of polynomial to fit for positions}{\calloc,\kwdrs}{\calloc, \hadmricdp}

\ParamList{ic\_locdfitw}{5}{Order of polynomial to fit for widths}{\calloc,\kwdrs}{\calloc, \hadmricdp}

\ParamList{ic\_locdfitp}{3}{Order of polynomial to fit for position error }{\kwdrs}{\hadmricdp}

\ParamList{ic\_max\_rms\_center}{0.2}{Maximum rms for sigma-clip order fit (center positions)}{\calloc}{\hadmricdp}

\ParamList{ic\_max\_ptp\_center}{0.200}{Maximum ptp for sigma-clip order fit (center positions)}{\calloc}{\hadmricdp}

\ParamList{ic\_ptporms\_center}{0.200}{Maximum frac ptp/rms for sigma-clip order fit}{\calloc}{\hadmricdp}

\ParamList{ic\_max\_rms\_width}{1.0}{Maximum rms for sigma-clip order fit (width)}{\calloc}{\hadmricdp}
% Future ic_max_rms_fwhm

\ParamList{ic\_max\_ptp\_fracfwhm}{10.0}{Maximum ptp for sigma-clip order fit (width)}{\calloc}{\hadmricdp}

\ParamList{ic\_loc\_delta\_width}{1.85}{Delta width (pix) for 3 convol shape model}{\kwdrs}{\hadmricdp}

\ParamList{ic\_locopt1}{1}{Localisation option 1: Option for archiving the location image}{\calloc}{\hadmricdp}


% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Tilt calculation parameters}

%----------------------------------------------------------------

\ParamList{ic\_extopt}{0}{Extraction option in tilt calculation}{\calslit}{\calslit, \hadmricdp}

\ParamList{ic\_extnbsig}{2.5}{Distance away from center to extract out to +/- }{\calslit}{\calslit, \hadmricdp}

\ParamList{ic\_facdec}{1.6}{Offset multiplicative factor (for width)}{\calslit}{\calslit}

\ParamList{coi}{10}{Oversampling factor (for tilt finding)}{\calslit}{\calslit}


% Future uc_tilt_fit

% ic_slit_order_plot

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Flat-fielding parameters}

%----------------------------------------------------------------

\ParamList{ic\_do\_bkgr\_subtraction}{0}{Do background measurement (True = 1, False = 0)}{\calff}{\hadmricdp}

\ParamList{ic\_bkgr\_window}{100}{Half-size of window for background measurements}{\calff}{\hadmricdp}

\ParamList{nbo}{36}{Number of orders in tilt file}{\calff}{\calff}
% Future ic_tilt_nbo

\ParamList{ccdsigdet}{100}{Manually set the sigdet to use in weighted tilt extraction}{\calff, \calext, \calextall}{\calff}
% Future ic_ff_sigdet

\ParamList{ic\_extfblaz}{50}{Half size blaze smoothing window}{\calff, \calext, \calextall}{\hadmricdp}


\ParamList{ic\_order\_plot}{5}{Order to plot on ff image plot}{\calff, \calext, \calextall}{\calff, \hadmricdp}
% Future ic_ff_order_plot

% Future ic_blaze_fitn

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Extraction parameters}

%----------------------------------------------------------------

\ParamList{ic\_extmeanzone}{16}{Mean window of extraction }{\calext, \calextall}{\hadmricdp}

\ParamList{satseuil}{64536}{Saturation threshold on order profile plot}{\calext, \calextall}{\calext, \calextall}


% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Drift parameters}

%----------------------------------------------------------------

\ParamList{noise}{100}{The value of the noise for drift calculation}{\caldrift}{\caldrift}
% future ic_drift_noise

\ParamList{seuilmax}{1.e9}{The maximum flux for good (unsaturated) pixels}{\caldrift}{\caldrift}
% future ic_drift_maxflux

\ParamList{size}{12}{The size around a saturated pixel to flag as unusable}{\caldrift}{\spirouRV.deltavrms2d(), \spirouRV.renorm\_cosmics2d(), \spirouRV.calcvrdrifts2d()}
% future ic_drift_boxsize

% Future: drift_nlarge

\ParamList{skip}{3}{Parameter to skip files in the sequence, only every ``skip'' file is used when loading `fp\_fp' files from \definevariable{DATA\_ROOT\_RAW}.}{\caldrift}{\caldrift}
% future: drift_file_skip

\ParamList{cut}{3}{Define the number of standard deviations cut at in cosmic renormalisation}{\caldrift}{\caldrift, \spirouRV.renorm\_cosmics2d()}

\ParamList{nomax}{28}{Define the number of orders to use (starting from 0 to max) used to get median drift  median(order0 --> order max)}{\caldrift}{\caldrift}
% future: ic_drift_n_order_max

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Quality Control Variables}

%----------------------------------------------------------------

\ParamList{qc\_max\_darklevel}{1.0}{Max dark median level [ADU/s]}{\caldark}{\caldark, \hadmricdp}

\ParamList{qc\_maxdead}{25.0}{Max fraction of dead pixels }{\caldark}{\caldark}

\ParamList{qc\_dark\_time}{1.0}{Min dark exposure time}{\caldark}{\hadmricdp}

\ParamList{qc\_loc\_maxlocfit\_removed\_ctr}{1500}{Maximum points removed in location fit}{\calloc}{\hadmricdp}

\ParamList{qc\_loc\_maxlocfit\_removed\_wid}{105}{Maximum points removed in width fit}{\calloc}{\hadmricdp}

\ParamList{qc\_loc\_rmsmax\_center}{100}{Maximum rms allowed in fitting location}{\calloc}{\hadmricdp}

\ParamList{qc\_loc\_rmsmax\_fwhm }{500}{Maximum rms allowed in fitting width}{\calloc}{\hadmricdp}

\ParamList{qc\_max\_signal}{65500}{Maximum signal allowed (set saturation limit)}{\calff, \calext, \calextall}{\hadmricdp}

\ParamList{qc\_loc\_flumax}{64500}{Saturation level reached warning}{\calff}{\hadmricdp}

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Calib DB settings}

%----------------------------------------------------------------

\ParamList{ic\_calib\_db\_master\_file}{master\_calib\_SPIROU.txt}{Define calibd DB master filename}{\caldark, \calloc}{\hadmricdp}
% Future ic_calibDB_filename

% Future calib_max_wait

% ----------------------------------------------------------
% \vspace{0.5cm}
% \subsection{}

% \ParamList{}{}{}{}{}

% ------------------------------------------------------------------------
\section{Input Keywords}
\label{section:the_in_keywords}


% For consistency use:
% \KWList{1}{2}{3}{4}{5}
% Where:
%        1 = Name of variable in header
%        2 = Name of keyword, used in code
%        3 = Description of the keyword
%        4 = Where keyword is used (code and or file)
%        5 = Where keyword is defined (code)

% ------------------------------------------------------------------------

The following FITS descriptors of the 2D raw frames are required for the DRS.
Last updated version 21 Nov 2014. 

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{Standard FITS Keywords}

%----------------------------------------------------------------

\begin{table}[H]
\begin{tabular}{>{\color{red}}l c r c l}
BITPIX  & = &                   16 & / & 16bit \\
NAXIS   & = &                    2 & / & Number of axes \\
NAXIS1  & = &                 4096 & / & Number of pixel columns \\
NAXIS2  & = &                 4096 & / & Number of pixel rows \\
BZERO   & = &              32768.0 & / & Zero factor \\
BSCALE  & = &                  1.0 & / & Scale factor \\
DATE    & = & `2013-11-26T09:06:14' & / & UTC Date of file creation \\
INSTRUME& = & `SPIROU'           & / & Instrument Name \\
\end{tabular}
\end{table}

% Future: ACQTIME1
% Future: ACQTIME

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{FITS keywords related to the detector}

%----------------------------------------------------------------

\begin{table}[H]
\begin{tabular}{>{\color{red}}l c r c l}
EXPTIME & = &                800.0 & / &  Integration time (seconds) \\
DARKTIME& = &            800.0 & / & Dark current time (seconds) \\
GAIN    & = &                 1.30 & / & gain (electrons/ADU) \\
RDNOISE & = &                 4.20 & / & read noise (electrons) \\
NSUBEXP & = &                    4 & / & Total number of sub-exposures of 5.2s \\
OBSTYPE & = &   `NORMAL'     & / & Exposure type (DARK/NORMAL) \\
MIDEXPTM& = &        400  & / &  mid-exposure time (seconds)  \\
EMCNTS  & = & 	444578   & / & exposure meter counts at end \\
\end{tabular}
\end{table}

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{FITS keywords related to the target}

%----------------------------------------------------------------

\begin{table}[H]
\begin{tabular}{>{\color{red}}l c r c l}
OBJNAME & = &  Gl9999   & / &  Target name \\
OBJRA   & = &  `5:35:09.87'         & / & Target right ascension \\
OBJDEC  & = &  `-5:27:53.3'        & / & Target declination \\
OBJRAPM & = &                  0.560 & / & Target right ascension proper motion in as/yr \\
OBJDECPM& = &                  -0.33 & / & Target declination proper motion in as/yr \\
OBJEQUIN& = &  2000.0       & / & Target equinox \\

OBJRV   & = &        -30.0      & / & Target Radial velocity (km/s)  (999 if unknown) \\
OBJTYPE & = &     `M5' & / & Target spectral type \\
OBJJMAG & = &        8.2 & / & Target J magnitude \\
OBJHMAG & = &        9.2 & / & Target H magnitude \\
OBJKMAG & = &        10.0 & / & Target K magnitude  \\
\end{tabular}
\end{table}
% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{FITS keywords related to the telescope}

%----------------------------------------------------------------

\begin{table}[H]
\begin{tabular}{>{\color{red}}l c r c l}
DATE\_OBS& = & `2013-11-26T09 :06 :14.858'       & / & Date at start of observation (UTC) \\
EQUINOX & = &               2000.0 & / &Equinox of coordinates \\
EPOCH   & = &            2000.0 & / & Epoch of coordinates \\
MJDATE  & = &        56622.3700212 & / & Modified Julian Date at start of observation \\
MJEND   & = &        56622.3797593 & / & Modified Julian Date at end of observation \\
AIRMASS & = &        1.4 & / & Airmass at start of observation \\
RA      & = & `5:35:09.87'         & / & Telescope right ascension \\
DEC     & = & `-5:27:53.3'         & / & Telescope declination \\

SEEING & = &    1.0 & / & Seeing at start of observation \\
\end{tabular}
\end{table}

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{FITS keywords related to the instrument}

%----------------------------------------------------------------

\begin{table}[H]
\begin{tabular}{>{\color{red}}l c r c l}
TPL\_NAME & = & `SPIROU\_POL\_WAVE'   & / & template Name  \\
TPL\_NEXP & = &    1    & / & \# of exposure within template  \\
TPL\_EXPN & = & 1   & / & exposure \# within template  \\
INS\_CAL & = & `WAVE'    & / & Simultaneous calibration (WAVE/FP/NONE)  \\
INS\_LAMP & = & `UrAr'   & / &   Calibration lamp  \\
INS\_RHB1 & = &  90          & / & SPIROU rhomb 1 position (deg) \\
INS\_RHB2 & = &  180           & / & SPIROU rhomb 2 position deg) \\
\end{tabular}
\end{table}

% ------------------------------------------------------------------------
\section{Output Keywords}
\label{section:the_out_keywords}

%----------------------------------------------------------------


% For consistency use:
% \KWList{1}{2}{3}{4}{5}
% Where:
%        1 = Name of variable in header
%        2 = Name of keyword, used in code
%        3 = Description of the keyword
%        4 = Where keyword is used (code and or file)
%        5 = Where keyword is defined (code)

% ------------------------------------------------------------------------

Below are a list of keywords that are used in FITS rec header files. Most are
defined in a few files, specific FITS rec files that these are used in are listed in []. These are split into catagories for ease of reading. \\

\noindent Note: This section is currently updated for `\caldark',`\calloc', `\calslit' and `\calff' only.


% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{General keywords}

%----------------------------------------------------------------

\KWList{VERSION}{kw\_version}{DRS version}{\calloc}{\kwdrs}

\KWList{LO}{kw\_root\_drs\_loc}{Used in keywords below}{\kwdrs}{\kwdrs}

\KWList{FF}{kw\_root\_drs\_flat}{Used in keywords below}{\kwdrs}{\kwdrs}

% Future kw_RDNOISE
% Future kw_GAIN
% Future kw_EXPTIME

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{cal\_dark keywords}

%----------------------------------------------------------------

\KWList{DADEAD}{kw\_DARK\_dead}{Fraction dead pixels [\%]}{\caldark [Dark Frame]}{\caldark}

\KWList{DAMED}{kw\_DARK\_MED}{median dark level [ADU/s]}{\caldark [Dark Frame]}{\caldark}

\KWList{DABDEAD}{kw\_DARKBLUE\_dead}{Fraction dead pixels blue part [\%]}{\caldark [Dark Frame]}{\caldark}

\KWList{DABMED}{kw\_DARKBLUE\_med}{median dark level blue part [ADU/s]}{\caldark [Dark Frame]}{\caldark}

\KWList{DARDEAD}{kw\_DARKRED\_dead}{Fraction dead pixels red part [\%]}{\caldark [Dark Frame]}{\caldark}

\KWList{DARMED}{kw\_DARKRED\_med}{median dark level red part [ADU/s]}{\caldark [Dark Frame]}{\caldark}

\KWList{DACUT}{kw\_DARK\_cut}{Threshold of dark level retain [ADU/s]}{\caldark [Dark Frame, Bad Pixel Map]}{\caldark}



% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{cal\_loc keywords}

%----------------------------------------------------------------

\KWList{\rootdrsloc NBO}{kw\_LOCO\_NBO}{nb orders localise}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc BCKGRD}{kw\_LOCO\_BCKGRD}{mean background [\%]}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc DEGCTR}{kw\_LOCO\_DEG\_C}{degree fit ctr ord}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc DEGFWH}{kw\_LOCO\_DEGW}{degree fit width ord}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc DEGERR}{kw\_LOCO\_DEGE}{degree fit profile error}{\calloc [\locofiber, \fwhmfiber] but not used}{\kwdrs}

\KWList{\rootdrsloc PRODEL}{kw\_LOCO\_DELTA}{param model 3gau}{\calloc [\locofiber, \fwhmfiber]  but not used}{\kwdrs}

\KWList{\rootdrsloc CTR[row, col]}{kw\_LOCO\_CTR\_COEFF}{Coeff center order}{\calloc [\locofiber, \fwhmfiber], used on a 2D list of coefficients size=(number of orders x number of fit coefficients)}{\kwdrs}

\KWList{\rootdrsloc FW[row, col]}{kw\_LOCO\_FWHM\_COEFF)}{Coeff fwhm order}{\calloc [\locofiber, \fwhmfiber], used on a 2D list of coefficients size=(number of orders x number of fit coefficients)}{\kwdrs}

\KWList{SIGDET}{kw\_CCD\_SIGDET}{CCD Readout Noise [e-]}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{CONAD}{kw\_CCD\_CONAD}{CCD conv factor [e-/ADU]}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc FLXMAX}{kw\_LOC\_maxflx}{max flux in order [ADU]}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc CTRMAX}{kw\_LOC\_Smaxpts\_ctr}{max rm pts ctr}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc WIDMAX}{kw\_LOC\_Smaxpts\_width}{max rm pts width}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc RMSCTR}{kw\_LOC\_rms\_ctr}{max rms ctr}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{\rootdrsloc RMSWID}{kw\_LOC\_rms\_fwhm}{max rms width}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}

\KWList{QC}{kw\_drs\_QC)}{QCcontr}{\calloc [\locofiber, \fwhmfiber]}{\kwdrs}





% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{cal\_slit keywords}

%----------------------------------------------------------------

\KWList{\rootdrsloc TILT}{kw\_TILT}{Tilt order}{\calslit [*\_tilt.fits]}{\kwdrs}



% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{cal\_ff keywords}

%----------------------------------------------------------------

\KWList{EXTSN}{kw\_EXTRA\_SN}{Signal to noise traio for order center}{\calff [*\_blaze\_\definevariable{fiber}.fits, *\_flat\_\definevariable{fiber}.fits]}{\kwdrs}

\KWList{\rootdrsflat RMS}{kw\_FLAT\_RMS}{FF RMS order}{\calff [*\_flat\_\definevariable{fiber}.fits]}{\kwdrs}

% ----------------------------------------------------------
\vspace{0.5cm}
\subsection{cal\_extract keywords}

%----------------------------------------------------------------

\KWList{\rootdrsloc FILE}{kw\_LOCO\_FILE}{Localization file used in extraction process}{\calext, \calextall [*\_e2ds\_\definevariable{fiber}.fits}{\kwdrs}

\noindent Note all cal\_loc keywords are also copied to ``\calext, \calextall [*\_e2ds\_\definevariable{fiber}.fits'' files








